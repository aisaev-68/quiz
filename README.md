# Викторина на Python с использованием FastAPI

### Описание

Простой веб-сервис, который предоставляет англоязычные вопросы для викторин через REST API. Вопросы берутся из публичного API (https://jservice.io/api/random), сохраняются в базе данных и предоставляются по запросу.
Функции

    POST /api/answer
    Возвращает предыдущий сохраненный вопрос для викторины. Если такого вопроса нет, возвращает пустой объект.

    GET /api/answer/all
    Возвращает все записи в базе

### Использованные технологии

    Python 3.10
    FastAPI
    Docker
    Postgresql для хранения данных
    Pydantic

### Установка

1. Клонируйте репозиторий:
```
git clone https://github.com/aisaev-68/quiz.git
cd quiz
```
2. Перенаменуйте example.env в .env и заполните своими данными:

3. Создайте виртуальное окружение:
```
poetry install
```
4. Установите права скрипту для запуска приложения:

    ```bash
    chmod +x entrypoint.sh
    ```
5. Собрать образы и запустить сервисы (при запуске сервисов происходить миграция и заполнение баз тестовыми данным): 
```
docker-compose up -d --build
```
6. Приложение будет доступно по адресу: `http://127.0.0.1`
7. Документация по api доступно по адресу: `http://127.0.0.1/api/docs`

### Другие команды работы с docker

1. Просмотреть все контейнеры:
```
 docker-compose ps -a
```
2. Перезапустить контейнеры/ перезапустить контейнер:
```
 docker-compose restart / docker restart <имя контейнера>
```
3. Запустить службу:
```
docker-compose start <имя контейнера>
```
4. Остановить службу:
```
docker-compose stop <имя контейнера>
```
5. Работа внутри контейнера в командной строке:
```
docker exec -it <имя контейнера> bash
```
6. Закрыть службы и удалить контейнеры:
```
docker container stop $(docker container ls -aq) &&  
docker container rm $(docker container ls -aq) &&  
docker system prune --all --volumes
```
